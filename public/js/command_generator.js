// Generated by CoffeeScript 1.5.0
(function() {
  var CommandGenerator, t;

  t = THREE;

  CommandGenerator = (function() {

    function CommandGenerator(root, protocol) {
      this.root = root;
      this.protocol = protocol;
      this.CommandType = this.protocol.build("CommandType");
      this.Command = this.protocol.build("Command");
      this.BoardCreateCommand = this.protocol.build("BoardCreate");
    }

    CommandGenerator.prototype.createCommand = function(type) {
      return new this.Command(type, this.root.userId, (new Date()).getTime(), this.root.roomId);
    };

    CommandGenerator.prototype.generateJoin = function() {
      return this.createCommand(this.CommandType.JOIN);
    };

    CommandGenerator.prototype.generateCreateBoard = function() {
      var command, player;
      player = this.root.controls.getObject();
      command = this.createCommand(this.CommandType.BOARD_CREATE);
      command.board_create = new this.BoardCreateCommand();
      command.board_create.width = 13;
      command.board_create.height = 8;
      command.board_create.x = player.position.x;
      command.board_create.y = player.position.y;
      command.board_create.z = player.position.z;
      command.board_create.pitch = this.root.controls.getPitchObject().rotation.x;
      command.board_create.yaw = this.root.controls.getYawObject().rotation.y;
      return command;
    };

    return CommandGenerator;

  })();

  window.CommandGenerator = CommandGenerator;

}).call(this);
